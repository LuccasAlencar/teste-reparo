# MottuVision - API de Gerenciamento de P√°tio

<div align="center">
  <img src="https://img.shields.io/badge/.NET-8.0-purple" alt=".NET 8.0">
  <img src="https://img.shields.io/badge/Minimal_API-8.0-blue" alt="Minimal API 8.0">
  <img src="https://img.shields.io/badge/Entity_Framework-8.0-green" alt="Entity Framework 8.0">
  <img src="https://img.shields.io/badge/Oracle-Database-red" alt="Oracle Database">
  <img src="https://img.shields.io/badge/Swagger-OpenAPI-green" alt="Swagger OpenAPI">
</div>

## üë• Integrantes do Grupo
- **Daniel da Silva Barros** | RM 556152
- **Luccas de Alencar Rufino** | RM 558253
- **Raul Clauson** - RM 555006

---

## üìã Descri√ß√£o do Projeto

O **MottuVision** √© uma API RESTful desenvolvida para otimizar o gerenciamento de p√°tios de motocicletas da Mottu. A solu√ß√£o resolve problemas cr√≠ticos de localiza√ß√£o manual de ve√≠culos, reduzindo perdas operacionais e aumentando a produtividade em at√© 40%.

### üéØ Problema Resolvido
A Mottu enfrentava desafios na localiza√ß√£o manual de motocicletas em seus p√°tios, causando:
- Perdas de tempo na localiza√ß√£o de ve√≠culos
- Erros de invent√°rio
- Retrabalhos operacionais
- Baixa produtividade das equipes

### üí° Solu√ß√£o Proposta
Sistema integrado que combina:
- **API REST robusta** para gerenciamento de entidades cr√≠ticas
- **Controle de localiza√ß√£o** por zonas e p√°tios
- **Rastreabilidade completa** de status e movimenta√ß√µes
- **Escalabilidade** para mais de 100 filiais

---

## üèóÔ∏è Justificativa da Arquitetura

### **Arquitetura Escolhida: Minimal API com Entity Framework Core**

**Por que esta arquitetura?**

1. **Minimal API (.NET 8)**
   - **Performance superior**: Menos overhead comparado ao MVC tradicional
   - **Simplicidade**: Ideal para APIs focadas em CRUD e opera√ß√µes diretas
   - **Modernidade**: Abordagem atual da Microsoft para APIs leves
   - **Produtividade**: Menos c√≥digo boilerplate, mais foco na l√≥gica de neg√≥cio

2. **Entity Framework Core com Oracle**
   - **Robustez empresarial**: Oracle Database para alta disponibilidade
   - **ORM maduro**: Abstra√ß√£o eficiente do banco de dados
   - **Migrations**: Versionamento autom√°tico do schema
   - **Performance**: Lazy loading e otimiza√ß√µes autom√°ticas

3. **Padr√£o de Organiza√ß√£o por Entidades**
   - **Escalabilidade**: F√°cil adi√ß√£o de novas funcionalidades
   - **Manutenibilidade**: C√≥digo organizado por dom√≠nio
   - **Testabilidade**: Isolamento claro de responsabilidades

4. **REST + HATEOAS + Pagina√ß√£o**
   - **Padr√µes da ind√∫stria**: Seguindo melhores pr√°ticas REST
   - **Performance**: Pagina√ß√£o evita sobrecarga de dados
   - **Usabilidade**: HATEOAS facilita navega√ß√£o na API

---

## üóÉÔ∏è Entidades Principais

O sistema gerencia **6 entidades principais** organizadas hierarquicamente:

### 1. **Usuario** 
Operadores e funcion√°rios do sistema
- Controle de acesso e autentica√ß√£o
- Rastreabilidade de a√ß√µes

### 2. **StatusGrupo** 
Categorias de status (Ex: "Operacional", "Manuten√ß√£o")
- Organiza√ß√£o hier√°rquica de estados
- Flexibilidade para diferentes tipos de status

### 3. **Status** 
Estados espec√≠ficos das motocicletas (Ex: "Dispon√≠vel", "Em Reparo")
- Controle granular do estado dos ve√≠culos
- Relacionamento com grupos para organiza√ß√£o

### 4. **Zona** 
Divis√µes do p√°tio (Ex: "Zona A", "Zona B")
- Organiza√ß√£o f√≠sica do espa√ßo
- Facilita√ß√£o da localiza√ß√£o

### 5. **Patio** 
Locais f√≠sicos onde ficam as motos
- Gest√£o de m√∫ltiplas unidades
- Controle de capacidade

### 6. **Moto** *(Entidade Central)*
Informa√ß√µes completas das motocicletas
- Dados t√©cnicos (placa, chassi)
- Localiza√ß√£o atual (zona + p√°tio)
- Estado operacional (status)
- Hist√≥rico e observa√ß√µes

**Justificativa do Dom√≠nio:** O gerenciamento de frotas de motocicletas √© um problema real da Mottu, empresa l√≠der em aluguel de motos para entregadores. A digitaliza√ß√£o deste processo gera valor mensur√°vel atrav√©s da redu√ß√£o de tempo de localiza√ß√£o e aumento da produtividade operacional.

---

## ‚öôÔ∏è Tecnologias Utilizadas

- **.NET 8.0** - Framework principal
- **ASP.NET Core Minimal API** - API Web moderna e perform√°tica
- **Entity Framework Core 8.0** - ORM para acesso a dados
- **Oracle Database** - Banco de dados empresarial
- **Swagger/OpenAPI** - Documenta√ß√£o interativa da API
- **C# 12** - Linguagem de programa√ß√£o

### Pacotes NuGet:
```xml
<PackageReference Include="Microsoft.EntityFrameworkCore" Version="8.0.8" />
<PackageReference Include="Microsoft.EntityFrameworkCore.Design" Version="8.0.8" />
<PackageReference Include="Oracle.EntityFrameworkCore" Version="8.21.121" />
<PackageReference Include="Oracle.ManagedDataAccess.Core" Version="3.21.130" />
<PackageReference Include="Swashbuckle.AspNetCore" Version="6.6.2" />
<PackageReference Include="Swashbuckle.AspNetCore.Annotations" Version="6.6.2" />
```

---

## üöÄ Instru√ß√µes de Execu√ß√£o

### ‚ö†Ô∏è **IMPORTANTE: Configura√ß√£o do Banco de Dados**

**1. Configure suas credenciais Oracle no `appsettings.json`:**
```json
{
  "ConnectionStrings": {
    "OracleConnection": "User Id=SEU_USUARIO;Password=SUA_SENHA;Data Source=(DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=oracle.fiap.com.br)(PORT=1521))(CONNECT_DATA=(SERVICE_NAME=orcl)));"
  }
}
```

### **Execu√ß√£o Completa (Recomendado):**

```bash
# 1. Clone o reposit√≥rio
git clone [URL_DO_REPOSITORIO]
cd MottuVision

# 2. Restaurar depend√™ncias
dotnet restore

# 3. Limpar projeto
dotnet clean

# 4. Build do projeto
dotnet build

# 5. Resetar banco (recriar schema)
dotnet ef database drop --force
dotnet ef migrations remove
dotnet ef migrations add InitialCreate
dotnet ef database update

# 6. Executar aplica√ß√£o
dotnet run
```

### **Execu√ß√£o R√°pida:**
```bash
dotnet run
```

### **Acesso √† API:**
- **URL Base:** `http://localhost:5000`

---

## üìö Endpoints da API

### **Resumo dos Recursos Dispon√≠veis:**

| Entidade | Endpoints | Funcionalidades |
|----------|-----------|----------------|
| **Usu√°rios** | `/api/usuarios` | CRUD completo, valida√ß√£o de usu√°rio √∫nico |
| **Zonas** | `/api/zonas` | CRUD completo, organiza√ß√£o por letra |
| **P√°tios** | `/api/patios` | CRUD completo, valida√ß√£o de depend√™ncias |
| **StatusGrupos** | `/api/statusgrupos` | CRUD completo, hierarquia de status |
| **Status** | `/api/statuses` | CRUD completo, relacionamento com grupos |
| **Motos** | `/api/motos` | CRUD completo, filtros, valida√ß√µes |

### **Padr√µes Implementados:**
- ‚úÖ **Pagina√ß√£o**: `?page=1&pageSize=20` em todas as listagens
- ‚úÖ **HATEOAS**: Links de navega√ß√£o em respostas paginadas  
- ‚úÖ **Filtros**: Busca por placa nas motos
- ‚úÖ **Valida√ß√µes**: Integridade referencial e unicidade
- ‚úÖ **Status Codes**: 200, 201, 204, 400, 404 adequadamente utilizados

---

## üß™ Exemplos de Uso dos Endpoints

### **1. Criar Status Grupo**
```bash
POST /api/statusgrupos
Content-Type: application/json

{
  "nome": "Operacional"
}

# Resposta: 201 Created
{
  "id": 1,
  "nome": "Operacional"
}
```

### **2. Criar Status**
```bash
POST /api/statuses
Content-Type: application/json

{
  "nome": "Dispon√≠vel",
  "statusGrupoId": 1
}

# Resposta: 201 Created
{
  "id": 1,
  "nome": "Dispon√≠vel",
  "statusGrupoId": 1
}
```

### **3. Criar Zona**
```bash
POST /api/zonas
Content-Type: application/json

{
  "nome": "Zona Norte",
  "letra": "N"
}

# Resposta: 201 Created
{
  "id": 1,
  "nome": "Zona Norte",
  "letra": "N"
}
```

### **4. Criar P√°tio**
```bash
POST /api/patios
Content-Type: application/json

{
  "nome": "P√°tio Central SP"
}

# Resposta: 201 Created
{
  "id": 1,
  "nome": "P√°tio Central SP"
}
```

### **5. Criar Moto**
```bash
POST /api/motos
Content-Type: application/json

{
  "placa": "ABC1D23",
  "chassi": "9BWZZZ377VT004251",
  "qrCode": "QR001",
  "dataEntrada": "2024-11-20T10:30:00",
  "previsaoEntrega": "2024-11-25T18:00:00",
  "fotos": "foto1.jpg,foto2.jpg",
  "zonaId": 1,
  "patioId": 1,
  "statusId": 1,
  "observacoes": "Moto em perfeito estado"
}

# Resposta: 201 Created
{
  "id": 1,
  "placa": "ABC1D23",
  "chassi": "9BWZZZ377VT004251",
  "qrCode": "QR001",
  "dataEntrada": "2024-11-20T10:30:00",
  "zonaId": 1,
  "patioId": 1,
  "statusId": 1
}
```

### **6. Listar Motos com Pagina√ß√£o e Filtro**
```bash
GET /api/motos?page=1&pageSize=10&placa=ABC

# Resposta: 200 OK
{
  "items": [
    {
      "id": 1,
      "placa": "ABC1D23",
      "chassi": "9BWZZZ377VT004251",
      "zona": {
        "id": 1,
        "nome": "Zona Norte",
        "letra": "N"
      },
      "patio": {
        "id": 1,
        "nome": "P√°tio Central SP"
      },
      "status": {
        "id": 1,
        "nome": "Dispon√≠vel"
      }
    }
  ],
  "page": 1,
  "pageSize": 10,
  "totalCount": 1,
  "links": [
    {
      "rel": "self",
      "href": "https://localhost/api/motos?page=1&pageSize=10",
      "method": "GET"
    }
  ]
}
```

### **7. Buscar Moto por ID com Relacionamentos**
```bash
GET /api/motos/1

# Resposta: 200 OK
{
  "id": 1,
  "placa": "ABC1D23",
  "chassi": "9BWZZZ377VT004251",
  "qrCode": "QR001",
  "dataEntrada": "2024-11-20T10:30:00",
  "zona": {
    "id": 1,
    "nome": "Zona Norte",
    "letra": "N"
  },
  "patio": {
    "id": 1,
    "nome": "P√°tio Central SP"
  },
  "status": {
    "id": 1,
    "nome": "Dispon√≠vel",
    "statusGrupo": {
      "id": 1,
      "nome": "Operacional"
    }
  }
}
```

### **8. Atualizar Moto**
```bash
PUT /api/motos/1
Content-Type: application/json

{
  "placa": "ABC1D23",
  "chassi": "9BWZZZ377VT004251",
  "qrCode": "QR001-UPDATED",
  "dataEntrada": "2024-11-20T10:30:00",
  "zonaId": 2,
  "patioId": 1,
  "statusId": 2,
  "observacoes": "Moto transferida para Zona Sul"
}

# Resposta: 200 OK
```

### **9. Remover Moto**
```bash
DELETE /api/motos/1

# Resposta: 204 No Content
```

## üìñ Documenta√ß√£o Swagger

A API possui documenta√ß√£o completa via Swagger/OpenAPI com:

‚úÖ **Descri√ß√µes detalhadas** de todos os endpoints  
‚úÖ **Par√¢metros documentados** com tipos e valida√ß√µes  
‚úÖ **Exemplos de payloads** para requisi√ß√µes e respostas  
‚úÖ **Modelos de dados** completamente descritos  
‚úÖ **Status codes** com suas respectivas descri√ß√µes  
‚úÖ **Agrupamento por entidades** para melhor navega√ß√£o  

---

## üîß Pr√©-requisitos

- **.NET 8.0 SDK** - [Download aqui](https://dotnet.microsoft.com/download/dotnet/8.0)
- **Acesso ao Oracle Database** (oracle.fiap.com.br)
- **Credenciais v√°lidas** do Oracle FIAP
- **JetBrains Rider** ou **Visual Studio** (opcional)

---

## üéØ Benef√≠cios da Solu√ß√£o

- üìà **40% de aumento** na produtividade operacional
- ‚è±Ô∏è **Localiza√ß√£o em segundos** em vez de minutos
- üìâ **Redu√ß√£o de perdas** e erros de invent√°rio  
- üîç **Rastreabilidade completa** de todas as opera√ß√µes
- üè¢ **Escalabilidade** para mais de 100 filiais
- üõ°Ô∏è **Auditoria** e controle de altera√ß√µes

---

## Desenvolvido com üíª e ‚ô•Ô∏è

- **Daniel Barros** - RM 556152
- **Luccas Rufino** - RM 558253
- **Raul Clauson** - RM 555006
